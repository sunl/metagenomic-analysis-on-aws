---
title : "业务场景"
weight : 12
---

本方案主要适合两个业务场景：
- 大规模批量任务分析：有大量的样本需要进行批量处理，比如有几千组样本要进行质控处理
- 自动化流程：自动化运行某个（或多个）分析流程中的每一个任务，比如 质控->组装->分箱提炼->注释

### 1.大规模批量任务分析

本业务场景以批量计算服务AWS Batch为核心，构建了一个高性能计算集群
- 支持同时进行数千、数万任务的分析
- 方案内置了质控、分箱提炼、注释等分析脚本
- 提供内置任务提交程序的Notebook作为用户工作台，用户只需要准备输入文件和文件列表，在Notebook中通过Python提交任务即可
- 计算资源根据实际的任务状态动态生成和销毁

该业务场景的AWS架构图如下所示：

![](/static/arch-batch.png)

### 2.自动化流程

在高性能集群之上，基于可视化的工作流服务AWS Step Functions，构建了一个自动化的分析流程
- 根据流程中不同任务对计算资源的不同需求做了解耦，用不同计算实例适配不同任务类型，以达到优化成本的目的，如分别使用不同的实例类型c6g.4xlarge(arm)、c6i.24xlarge、c6i.8xlarge、c6i.12xlarge来运行质控、组装、分箱、注释任务：
- 用户只需一次性地启动流程，无需手动执行每个步骤
- 通过订阅邮件来接收流程执行状态：成功或失败

该业务场景的AWS架构图如下所示：

![](/static/arch-pipeline.png)


### 3.主要用到的AWS服务及其用途
本方案主要用到了以下AWS服务：
- Batch：批量计算，自动计算资源调度
- EC2：适合各种计算需求的实例类型，Arm架构的Graviton实例提升性价比，Spot实例降低成本
- S3：数据存储，通过智能分层优化成本
- ECR：容器镜像仓库
- DynamoDB：存储任务状态信息
- EFS：共享文件系统，存储任务运行脚本
- SageMaker Notebook：用户工作台，任务投递
- Step Functions：自动化工作流
- SNS：流程执行状态邮件通知